<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Gigya Demo</title>
        <link rel="stylesheet" href="node_modules/bootflat/css/bootstrap.min.css" type="text/css"/>
        <link rel="stylesheet" href="css/main.css" type="text/css"/>
    <!--    <script src="https://cdns.us1-st1.gigya.com/js/gigya.js?apiKey=3_hS_El2sb5WKFauepzz6AkuVggU1PkO73jxdVgqNO9OBsC_-GAv3k-wwjb_08WlRd"></script>-->
        <script src="https://cdns.gigya.com/js/gigya.js?apiKey=3_cedjEwc0k12UEQVJkIfdUib4FQ9O-o_UMti8iFNqIDWtprbtNeFEKHWCZDay3AV5"></script>
    <!--    <script src="https://cdns.il1-st7.gigya.com/js/gigya.js?apiKey=3_RlHrwkTnKisrDqb9MEk807szJFBvJdfl6ORzsT3L3X0GYeyWJPS4A4dJl-Igks4O"></script>-->
    <!--    <script src="https://cdns.us1-st1.gigya.com/js/gigya.js?apiKey=3_HCalFtInj&#45;&#45;1FsLPEnTrEB0G1up6BDobQ16YVTt00VBL4DrFYK54Vy_g-zeu6gNw"></script> &lt;!&ndash; Alex &ndash;&gt;-->
    </head>
    <body>
        <div class="navbar navbar-default">
            <div class="container-fluid">
                <div class="navbar-header">
                    <span class="navbar-brand blue" style="background-color:#4A89DC;color:#FFF">Push TFA Demo Site</span>
                </div>
                <div id="user" class="navbar-text navbar-right">
                    <h4>
                        <span id="userWelcome"></span>
                        <button id="updateProfile" type="button" class="btn btn-default navbar-btn" onclick="showProfile()">My Profile</button>
                        <button id="logoutBtn" type="button" class="btn btn-danger navbar-btn" onclick="gigya.accounts.logout()">Logout</button>
                    </h4>
                </div>
            </div>
        </div>
        <div id="loginScreenSetPanel" class="login-panel panel panel-default">
        </div>
        <div id="profileScreenSetPanel" class="profile-panel panel panel-default">
        </div>
        <script>

            document.getElementById('user').style.display = 'none';
            const screenSetPrefix = 'Default';
            window['onGigyaServiceReady'] = function() {
                showLogin();
                if(document.cookie.indexOf('glt_') !== -1) {
                    gigya.accounts.getAccountInfo({callback: onLogin});
                    showProfile()
                }
                gigya.accounts.addEventHandlers({
                    onLogin, onLogout
                });
            };
            function showLogin() {
                const screenSetName = 'RegistrationLogin'
                const screenName = 'login';
                gigya.accounts.showScreenSet({
                    containerID: 'loginScreenSetPanel',
                    screenSet: screenSetPrefix + '-' + screenSetName,
                    startScreen: 'gigya-' + screenName + '-screen'
                });
            }
            function showProfile() {
                const screenSetName = 'ProfileUpdate'
                const screenName = 'update-profile';
                gigya.accounts.showScreenSet({
                    containerID: 'profileScreenSetPanel',
                    screenSet: screenSetPrefix + '-' + screenSetName,
                    startScreen: 'gigya-' + screenName + '-screen'
                });
            }
            function onLogin(e) {
                document.getElementById('userWelcome').innerHTML = "Hello, " + e.profile.firstName + " " + e.profile.lastName;
                document.getElementById('user').style.display = '';
                document.getElementById('loginScreenSetPanel').style.display = 'none';
                document.getElementById('profileScreenSetPanel').style.display = '';
            }
            function onLogout() {
                document.getElementById('userWelcome').innerHTML = '';
                document.getElementById('user').style.display = 'none';
                document.getElementById('loginScreenSetPanel').style.display = '';
                document.getElementById('profileScreenSetPanel').style.display = 'none';
                showLogin();
            }
        </script>
    </body>
</html>
